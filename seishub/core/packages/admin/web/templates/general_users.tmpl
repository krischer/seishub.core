<h1>Users</h1>

## ============================================================================
## Panel to add a new user.

#if $action=='add'
<h2>Add a new user to the SeisHub instance.</h2>
<form method="post" id="add" action="">
  <div class="field">
    <label>Username</label><br />
    <input type="text" size="20" name="user_name" value="$user_name" />
  </div>
  <div class="field">
    <label>Real Name</label><br />
    <input type="text" size="20" name="real_name" value="$real_name" />
  </div>
  <div class="field">
    <label>Password</label><br />
    <input type="password" size="20" name="password" value="" />
  </div>
  <div class="field">
    <label>Password Confirmation</label><br />
    <input type="password" size="20" name="password_confirmation" value="" />
  </div>
  <div class="field">
    <label>Groups (seperated by commas)</label><br />
    <input type="text" size="80" name="groups" value="$groups" />
  </div> <div class="field"> <label>E-Mail</label><br /> <input type="text" size="80" name="email" value="$email" />
  </div>
  <div class="field">
    <label>Institution</label><br />
    <input type="text" size="80" name="institution" value="$institution" />
  </div>
  <div class="button">
    <input type="submit" name="add" value="Add" />
    <input type="submit" name="cancel" value="Cancel" />
  </div>
</form>

<br />
<br />
#end if


## ============================================================================
## Panel to edit a user.

#if $action=='edit'
<h2>Edit user &quot;$old_user_name&quot;</h2>
<form method="post" id="edit" action="">
   <input type="hidden" name="old_user_name" value="$old_user_name" />
  <div class="field">
    <label>New User Name</label><br />
    <input type="text" size="80" name="user_name" value="$user_name" />
  </div>
  <div class="field">
    <label>Name</label><br />
    <input type="text" size="80" name="real_name" value="$real_name" />
  </div>
  <div class="field">
    <label>Password</label><br />
    <input type="password" size="20" name="password" value="" />
  </div>
  <div class="field">
    <label>Password Confirmation</label><br />
    <input type="password" size="20" name="password_confirmation" value="" />
  </div>
  <div class="field">
    <label>Groups (seperated by commas)</label><br />
    <input type="text" size="80" name="groups" value="$groups" />
  </div>
  <div class="field">
    <label>E-Mail</label><br />
    <input type="text" size="80" name="email" value="$email" />
  </div>
  <div class="field">
    <label>Institution</label><br />
    <input type="text" size="80" name="institution" value="$institution" />
  </div>
  <div class="field">
    #if $user_is_active==True
    <input type="checkbox" checked="checked" size="80" name="user_is_active" value="user_is_active" />
    #else
    <input type="checkbox" size="80" name="user_is_active" value="user_is_active" />
    #end if

    <label>User Is Active</label>
  </div>
  <div class="button">
    <input type="submit" name="edit" value="Save" />
    <input type="submit" name="cancel" value="Cancel" />
  </div>
</form>

<br />
<br />
#end if


## ============================================================================
## If no action is specified, render a list of all users and some buttons.

#if not $action
<h3 style="padding-bottom: 10pt">Users with administrative rights are highlighted. Inactive users are grayed out.</h3>
<form method="post" id="list" action="">
  <table class="list">
    <tr>
      <th></th>
      <th>ID</th>
      <th>User Name</th>
      <th>Real Name</th>
      <th>E-Mail</th>
      <th>Institution</th>
      <th>Groups</th>
      <th>Is Active</th>
      <th>Last Login (UTC)</th>
      <th>Date Joined (UTC)</th>
    </tr>
    #for $user in $users
    #if $user.is_active==False
    <tr style="background: #eee; color: #ccc">
    #elif 'admin' in $user.groups
    <tr style="background: #F5A9A9">
    #else
    <tr>
    #end if
      <td>
        <input type="radio" name="user_name" value="$user.user_name" />
      </td>
      <td>$user.id</td>
      <td>$user.user_name</td>
      <td>$user.real_name</td>
      <td>
        #if $user.email
        <a href="mailto:$user.email">$user.email</a>
        #end if
      </td>
      <td>$user.institution</td>
      <td>$user.groups</td>
      <td>$user.is_active</td>
      <td>$user.last_login</td>
      <td>$user.date_joined</td>
    </tr>
    #end for
  </table>

  <div class="button">
    <input type="submit" name="add-user" value="Add User" />
    <input type="submit" name="edit-user" value="Edit Selected User" />
    <input type="submit" name="delete" value="Delete Selected User"
        onclick="return confirm('Are you sure you want to delete the user?')" />
  </div>
</form>
#end if
